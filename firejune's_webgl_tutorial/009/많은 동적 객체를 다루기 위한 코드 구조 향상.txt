Improving the code structure with lots of moving objects